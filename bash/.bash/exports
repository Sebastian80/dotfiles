#!/usr/bin/env bash
# ~/.bash/exports
# Environment variable exports for all shells
# Loaded by: .bash_profile and .bashrc

# Editors
export EDITOR=micro
export VISUAL=micro
export PAGER=less

# History configuration
export HISTSIZE=10000
export HISTFILESIZE=20000
export HISTCONTROL=ignoreboth:erasedups
export HISTIGNORE="ls:ll:cd:pwd:exit:clear:history"
export HISTTIMEFORMAT="%F %T "

# Language and locale
export LANG=de_DE.UTF-8
export LC_ALL=de_DE.UTF-8

# Less configuration (better paging)
export LESS='-F -g -i -M -R -S -w -X -z-4'

# Colored man pages
export LESS_TERMCAP_mb=$'\E[1;31m'     # begin bold
export LESS_TERMCAP_md=$'\E[1;36m'     # begin blink
export LESS_TERMCAP_me=$'\E[0m'        # reset bold/blink
export LESS_TERMCAP_so=$'\E[01;44;33m' # begin reverse video
export LESS_TERMCAP_se=$'\E[0m'        # reset reverse video
export LESS_TERMCAP_us=$'\E[1;32m'     # begin underline
export LESS_TERMCAP_ue=$'\E[0m'        # reset underline

# XDG Base Directory specification
export XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}"
export XDG_DATA_HOME="${XDG_DATA_HOME:-$HOME/.local/share}"
export XDG_CACHE_HOME="${XDG_CACHE_HOME:-$HOME/.cache}"
export XDG_STATE_HOME="${XDG_STATE_HOME:-$HOME/.local/state}"

# bat (cat replacement) - check for both 'bat' and 'batcat'
if command -v bat &>/dev/null; then
    export BAT_THEME="Catppuccin-frappe"
    export BAT_STYLE="numbers,changes,header"
    export MANPAGER="sh -c 'col -bx | bat -l man -p'"
elif command -v batcat &>/dev/null; then
    export BAT_THEME="Catppuccin-frappe"
    export BAT_STYLE="numbers,changes,header"
    export MANPAGER="sh -c 'col -bx | batcat -l man -p'"
fi

# ripgrep configuration file location
export RIPGREP_CONFIG_PATH="$HOME/.config/ripgrep/config"

# fzf (fuzzy finder) configuration
if command -v fzf &>/dev/null; then
    # Use bat for preview if available
    if command -v bat &>/dev/null; then
        export FZF_DEFAULT_OPTS="--height 40% --layout=reverse --border --preview 'bat --style=numbers --color=always {}' --bind ctrl-u:preview-page-up,ctrl-d:preview-page-down"
    elif command -v batcat &>/dev/null; then
        export FZF_DEFAULT_OPTS="--height 40% --layout=reverse --border --preview 'batcat --style=numbers --color=always {}' --bind ctrl-u:preview-page-up,ctrl-d:preview-page-down"
    else
        export FZF_DEFAULT_OPTS="--height 40% --layout=reverse --border"
    fi

    # Use fd for file searching if available
    if command -v fd &>/dev/null; then
        export FZF_DEFAULT_COMMAND='fd --type f --hidden --follow --exclude .git'
        export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
        export FZF_ALT_C_COMMAND='fd --type d --hidden --follow --exclude .git'
    elif command -v fdfind &>/dev/null; then
        export FZF_DEFAULT_COMMAND='fdfind --type f --hidden --follow --exclude .git'
        export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
        export FZF_ALT_C_COMMAND='fdfind --type d --hidden --follow --exclude .git'
    fi
fi

# eza (modern ls) configuration
if command -v eza &>/dev/null; then
    export EZA_COLORS="da=1;34:gm=1;34"
    export EZA_ICONS_AUTO=1
fi
