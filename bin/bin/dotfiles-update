#!/bin/bash
# dotfiles-update - Update dotfiles from git and restow
# Usage: dotfiles-update

set -e

GREEN='\033[0;32m'
BLUE='\033[0;34m'
NC='\033[0m'

info() { echo -e "${GREEN}[INFO]${NC} $1"; }
step() { echo -e "${BLUE}[STEP]${NC} $1"; }

DOTFILES_DIR="$HOME/dotfiles"

if [[ ! -d "$DOTFILES_DIR" ]]; then
    echo "Error: Dotfiles directory not found at $DOTFILES_DIR"
    exit 1
fi

cd "$DOTFILES_DIR" || exit 1

step "Pulling latest changes from git..."
git pull --rebase

step "Restowing all packages..."
make update

info "âœ“ Dotfiles updated and restowed successfully!"
